{"ast":null,"code":"var _jsxFileName = \"/Users/devanshkaloti/Desktop/react-learning/thdproductquerys/src/Pages/HomePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useContext, useEffect, useState } from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { Grid } from \"@material-ui/core\";\nimport FiltersComponent from \"../Components/FiltersComponent\";\nimport ProductListComponent from \"../Components/ProductListComponent\";\nimport { FiltersContext } from \"../FiltersContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst HomePage = () => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [data2, setData] = useState();\n  const {\n    filtersObj,\n    setFiltersObj\n  } = useContext(FiltersContext);\n  useEffect(() => fetchData(), []);\n\n  const flattenObject = obj => {\n    const flattened = {};\n    Object.keys(obj).forEach(key => {\n      if (typeof obj[key] === 'object' && obj[key] !== null) {\n        Object.assign(flattened, flattenObject(obj[key]));\n      } else {\n        flattened[key] = obj[key];\n      }\n    });\n    return flattened;\n  };\n\n  const getFilterOptions = (data, keyName) => {\n    const options = [];\n    console.log(data);\n\n    for (const row in data) {\n      options.push(row[keyName]);\n    }\n\n    return [...new Set(options)];\n  };\n\n  const setFiltersObject = data => {\n    const allFields = flattenObject(data[0]);\n    let filterObjects = [];\n    const flattenedData = flattenObject(data);\n\n    for (const field in allFields) {\n      let object = {\n        name: field,\n        options: getFilterOptions(flattenedData, field),\n        ref: /*#__PURE__*/createRef(),\n        changeOption: changeFilterOption\n      };\n      filterObjects.push(object);\n    }\n\n    setFiltersObj(filterObjects);\n  };\n\n  const changeFilterOption = (currentI, newOption = \"AAA\") => {\n    // if (filtersObj !== undefined && filtersObj[currentI] !== undefined) {\n    //     filtersObj[currentI].selectedOption = newOption\n    console.log(filtersObj); //     setFiltersObj(filtersObj)\n    // }\n  };\n\n  const fetchData = () => {\n    setLoading(true);\n    fetch(\"https://www.homedepot.ca/api/search/v1/search?category=1010108&store=7008&filter=nz0&pageSize=40&lang=en\").then(response => response.json()).then(data => {\n      console.log(data);\n      setFiltersObject(data['products']);\n      setData(data['products']);\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: '30px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"false\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 4,\n            children: /*#__PURE__*/_jsxDEV(FiltersComponent, {\n              filtersObj: filtersObj\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 8,\n            children: /*#__PURE__*/_jsxDEV(ProductListComponent, {\n              loading: loading,\n              products: data2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 12\n  }, this);\n};\n\n_s(HomePage, \"0kA8df8p9L+qF6aRbNmBLdfFzNY=\");\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["/Users/devanshkaloti/Desktop/react-learning/thdproductquerys/src/Pages/HomePage.js"],"names":["React","createRef","useContext","useEffect","useState","CssBaseline","Typography","Container","Grid","FiltersComponent","ProductListComponent","FiltersContext","HomePage","loading","setLoading","data2","setData","filtersObj","setFiltersObj","fetchData","flattenObject","obj","flattened","Object","keys","forEach","key","assign","getFilterOptions","data","keyName","options","console","log","row","push","Set","setFiltersObject","allFields","filterObjects","flattenedData","field","object","name","ref","changeOption","changeFilterOption","currentI","newOption","fetch","then","response","json","marginTop"],"mappings":"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","sourcesContent":["import React, {createRef, useContext, useEffect, useState} from 'react'\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport {Grid} from \"@material-ui/core\";\nimport FiltersComponent from \"../Components/FiltersComponent\";\nimport ProductListComponent from \"../Components/ProductListComponent\";\nimport {FiltersContext} from \"../FiltersContext\";\n\nconst HomePage = () => {\n    const [ loading, setLoading ] = useState(false)\n    const [ data2, setData ] = useState()\n    const { filtersObj, setFiltersObj } = useContext(FiltersContext)\n\n    useEffect(() => fetchData(), []);\n\n    const flattenObject = (obj) => {\n        const flattened = {}\n\n        Object.keys(obj).forEach((key) => {\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\n                Object.assign(flattened, flattenObject(obj[key]))\n            } else {\n                flattened[key] = obj[key]\n            }\n        })\n\n        return flattened\n    }\n\n    const getFilterOptions = (data, keyName) => {\n        const options = []\n        console.log(data)\n        for (const row in data) {\n            options.push(row[keyName])\n        }\n        return [...new Set(options)]\n    }\n\n    const setFiltersObject = (data) => {\n        const allFields = flattenObject(data[0])\n        let filterObjects = []\n        const flattenedData = flattenObject(data)\n\n        for (const field in allFields) {\n            let object = {\n                name: field,\n                options: getFilterOptions(flattenedData, field),\n                ref: createRef(),\n                changeOption: changeFilterOption\n            }\n            filterObjects.push(object)\n        }\n\n        setFiltersObj(filterObjects)\n    }\n\n    const changeFilterOption = (currentI, newOption = \"AAA\") => {\n        // if (filtersObj !== undefined && filtersObj[currentI] !== undefined) {\n        //     filtersObj[currentI].selectedOption = newOption\n            console.log(filtersObj)\n        //     setFiltersObj(filtersObj)\n        // }\n    }\n\n    const fetchData = () => {\n        setLoading(true)\n\n        fetch(\"https://www.homedepot.ca/api/search/v1/search?category=1010108&store=7008&filter=nz0&pageSize=40&lang=en\")\n            .then(response => response.json())\n            .then(data => {\n                console.log(data);\n                setFiltersObject(data['products'])\n                setData(data['products'])\n                setLoading(false)\n            })\n    }\n\n    return <div style={{marginTop: '30px'}}>\n        <CssBaseline />\n        <Container maxWidth=\"false\">\n            <Grid container spacing={3}>\n                { loading ? <></> :\n                    <>\n                        <Grid item xs={4}>\n                            <FiltersComponent filtersObj={filtersObj} />\n                        </Grid>\n                        <Grid item xs={8}>\n                            <ProductListComponent loading={loading} products={data2} />\n                        </Grid>\n                    </>\n                }\n            </Grid>\n        </Container>\n    </div>\n}\n\nexport default HomePage"]},"metadata":{},"sourceType":"module"}